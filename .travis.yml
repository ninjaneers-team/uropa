language: go
sudo: required

env:
  global:
    - GO111MODULE=on
#  - GOPROXY=https://proxy.golang.org

services:
  - docker

go:
  - "1.13"

node_js:
  - "10"

branches:
  only:
    - master

install:
  - npm install -g semantic-release @semantic-release/release-notes-generator @semantic-release/commit-analyzer @semantic-release/changelog @semantic-release/github @semantic-release/git

before_script:
  - go get golang.org/x/lint/golint

script:
  - ./.ci/check.sh
  - semantic-release

cache:
  directories:
    - $HOME/gopath/pkg/mod